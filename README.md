# Messenger Auth

**Messenger Auth** — это WordPress-плагин, который позволяет авторизовать пользователей на сайте через Telegram с использованием кода подтверждения. Плагин автоматически создает нового пользователя при первом входе через Telegram и предоставляет временный доступ в админ-панель WordPress без необходимости вводить логин и пароль.

## Особенности

- **Авторизация через Telegram**:
  - Пользователь получает код авторизации в Telegram.
  - Код используется для входа в админ-панель WordPress.
- **Автоматическое создание пользователей**:
  - Если пользователь с указанным Chat ID отсутствует, он создается автоматически.
  - Пользователю присваивается временная роль (по умолчанию — `editor`).
- **Гибкие настройки**:
  - Токен Telegram-бота.
  - Chat ID пользователя.
  - Настройки внешнего вида кнопки (цвет, размер).
- **Интеграция с WordPress**:
  - Используются стандартные уведомления о сохранении настроек.
  - Удобная страница настроек в админке WordPress.
- **Кросс-языковая поддержка**:
  - Уведомления адаптируются под язык сайта.

## Структура плагина

```plaintext
messenger-auth/
├── assets/
│   ├── css/
│   │   └── admin-style.css     // Стили для страницы настроек
│   └── js/
│       └── front-auth.js       // Скрипт для взаимодействия с формой авторизации
├── includes/
│   ├── admin-settings.php      // Код для страницы настроек
│   ├── messenger-functions.php // Основные функции работы с Telegram
│   ├── shortcodes.php          // Шорткод для отображения формы авторизации
│   └── session-handler.php     // Логика обработки авторизации и сессий
├── messenger-auth.php          // Главный файл плагина
```

## Установка

1. Скачайте плагин или клонируйте репозиторий.
2. Загрузите папку `messenger-auth` в директорию `/wp-content/plugins/` вашего сайта WordPress.
3. Активируйте плагин через меню **Plugins** в админ-панели WordPress.
4. Настройте плагин на странице **Settings → Messenger Auth**:
   - Введите токен Telegram-бота.
   - Укажите Chat ID для тестирования.
   - Настройте внешний вид кнопки.

## Использование

1. Создайте Telegram-бота через [@BotFather](https://core.telegram.org/bots#botfather) и получите токен.
2. Включите уведомления и отправку кодов авторизации через Telegram.
3. Для отображения формы авторизации используйте шорткод `[auth_code_form]` на любой странице.

## Заметки

- Убедитесь, что ваш Telegram-бот активен и настроен правильно.
- Код авторизации действует только один раз. После использования требуется запросить новый код.
